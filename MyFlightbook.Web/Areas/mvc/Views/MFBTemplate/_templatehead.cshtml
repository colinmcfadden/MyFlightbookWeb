<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src='@String.Format(System.Globalization.CultureInfo.InvariantCulture, "https://www.googletagmanager.com/gtag/js?id={0}", LocalConfig.SettingForKey(Request.IsLocal ? "GoogleAnalyticsGA4Developer" : "GoogleAnalyticsGA4Production"))'></script>
<script>
    window.dataLayer = window.dataLayer || [];
    function gtag() { dataLayer.push(arguments); }
    gtag('js', new Date());

    gtag('config', '@LocalConfig.SettingForKey(Request.IsLocal ? "GoogleAnalyticsGA4Developer" : "GoogleAnalyticsGA4Production")');
</script>
@if (ViewBag.BaseRef != null)
{
    <base href="@ViewBag.BaseRef" />
}
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" id="metaViewport" />
<meta name="verify-v1" content="7D/8Uvt4SqfWiyxmBjdh6ee4Kmr8ckec9yCd8wGU9n0=" />
<meta name="apple-itunes-app" content="app-id=349983064" />
<title>@(String.IsNullOrEmpty(ViewBag.Title) ? Branding.CurrentBrand.AppName : ViewBag.Title)</title>
<script src="@VirtualPathUtility.ToAbsolute("~/Scripts/jquery-3.7.1.min.js")" type="text/javascript"></script>
<script src="@VirtualPathUtility.ToAbsolute("~/Scripts/jquery-ui-1.13.2.min.js")" type="text/javascript"></script>
<script src="@VirtualPathUtility.ToAbsolute("~/Scripts/jquery.validate.min.js")" type="text/javascript"></script>
<script src="@VirtualPathUtility.ToAbsolute("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script>
<script src="@VirtualPathUtility.ToAbsolute("~/Public/Scripts/jqueryutil.js?v=3")"></script>
<script src='@VirtualPathUtility.ToAbsolute("~/Public/Scripts/jquery.fitvids.js")' type="text/javascript"></script>
<script src="https://cdn.jsdelivr.net/bxslider/4.2.12/jquery.bxslider.min.js" type="text/javascript"></script>
@if (ViewBag.UseCharting)
{
    <script src="https://www.google.com/jsapi" type="text/javascript"></script>
    <script src="@VirtualPathUtility.ToAbsolute("~/public/Scripts/gchart.js?v=4")" type="text/javascript"></script>
    <script type="text/javascript">
        google.load('visualization', '1.1', { packages: ['corechart'] });
        var chartsToDraw = [];
        var chartData = [];
        google.setOnLoadCallback(drawCharts);
        function drawCharts() {
            for (var i = 0; i < chartsToDraw.length; i++) {
                var cd = drawGChart(chartsToDraw[i]);
                chartData.push(cd);
            }
        }
    </script>
}
@if (ViewBag.UseMaps)
{
    <script type="text/javascript">
        var mapLibsReady = 0;   // Has mapping fully loaded?
        var mapInitFuncs = [];  // init functions (closures) to call once mapping is loaded.

        function onGMapLoaded() {
            // Need BOTH spiderfier AND googlemaps to be ready before we can continue
            if (++mapLibsReady < 2)
                return;
            for (var i = 0; i < mapInitFuncs.length; i++) {
                mapInitFuncs[i]();
            }
        }

        function deferMapLoad(func) {
            mapInitFuncs.push(func);
        }
    </script>
    <script src="@VirtualPathUtility.ToAbsolute("~/Public/Scripts/GMapScript.js?v=14")" type="text/javascript"></script>
    <script defer src="@("https://maps.googleapis.com/maps/api/js?callback=onGMapLoaded&key=" + HttpUtility.HtmlEncode(MyFlightbook.SocialMedia.GooglePlusConstants.MapsKey))"></script>
    <script defer src="@(VirtualPathUtility.ToAbsolute("~/Public/Scripts/oms.min.js?v=9&spiderfier_callback=onGMapLoaded"))"></script>
}

@if (ViewBag.IsIOSOrAndroid)
{
    <meta name="format-detection" content="telephone=no" />
}
<link rel="shortcut icon" href="/favicon.ico?v2" />
<link rel="icon" href="/favicon.ico?v2" />
<link rel="stylesheet" type="text/css" href="@VirtualPathUtility.ToAbsolute("~/Content/jHtmlArea/jHtmlArea.css")" />
<link href="@VirtualPathUtility.ToAbsolute("~/images/apple-touch-icon.png")" rel="apple-touch-icon" />
<link rel="stylesheet" href="@VirtualPathUtility.ToAbsolute("~/Content/themes/base/jquery-ui.css?v=2")" type="text/css">
<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/bxslider/4.2.12/jquery.bxslider.css" />
<link href="@VirtualPathUtility.ToAbsolute("~/public/CSS/jqueryuimods.css?v=5")" type="text/css" rel="stylesheet" />
<link href="@VirtualPathUtility.ToAbsolute(MFBConstants.BaseStylesheet)" rel="stylesheet" type="text/css" />
<link href="@VirtualPathUtility.ToAbsolute("~/public/CSS/mfbheader.css?v=3")" rel="stylesheet" type="text/css" />
<link rel="Stylesheet" type="text/css" href='@ViewBag.NightCSS' />
<link href="@ViewBag.BrandCSS" rel="Stylesheet" type="text/css" />
<link rel="Stylesheet" type="text/css" href='@ViewBag.MobileCSS' />
@{
    if (!String.IsNullOrEmpty(ViewBag.PrintingCSS))
    {
        <link href="@VirtualPathUtility.ToAbsolute(ViewBag.PrintingCSS)" rel="Stylesheet" type="text/css" />
    }
}
<style type="text/css">
    .ui-wrapper {
        padding: 0 !important;
    }

    /* below is needed for client-side validation to work with custom messages.  Broken... */
    .field-validation-valid {
        display: none;
    }

    .validation-summary-valid {
        display: none;
    }

    /* for Html editor, which uses a <div class="Body"><iframe ... */
    div.Body iframe {
        width: 100%;
    }
</style>

